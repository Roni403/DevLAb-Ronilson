from django.shortcuts import render
from django.contrib.auth.decorators import login_required


@login_required
def home(request):
    user = request.user

    projetos = []
    usuarios = []

    context = {
        'projetos': projetos,
        'usuarios': usuarios,
    }

    tipo = (user.tipo or '').strip().lower()

    # aceita variações reais do banco
    if tipo in ['estudante', 'aluno']:
        return render(request, 'home_estudante.html', context)

    elif tipo in ['professor', 'professora']:
        return render(request, 'home_professor.html', context)

    elif tipo in ['coordenador', 'coordenadora', 'coordenação']:
        return render(request, 'home_coordenador.html', context)

    # fallback VISÍVEL (debug)
    return render(request, 'home.html', {
        **context,
        'erro_tipo': f'Tipo não reconhecido: "{user.tipo}"'
    })
