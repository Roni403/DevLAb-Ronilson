{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');

    body {
        background: #f4f6f9;
        font-family: 'Montserrat', sans-serif;
        margin: 0;
        padding: 0;
        color: #2c2c2c;
    }

    /* LAYOUT GERAL */
    .layout {
        display: flex;
        min-height: 100vh;
    }

    /* SIDEBAR */
    .sidebar {
        width: 260px;
        background: #1f3c88;
        color: #fff;
        padding: 25px 20px;
        box-shadow: 4px 0 15px rgba(0,0,0,0.15);
    }

    .sidebar h2 {
        font-size: 22px;
        margin-bottom: 30px;
        text-align: center;
        font-weight: 700;
    }

    .sidebar a {
        display: block;
        padding: 12px 14px;
        margin-bottom: 10px;
        border-radius: 6px;
        text-decoration: none;
        color: #fff;
        font-size: 14px;
        font-weight: 600;
        transition: 0.2s;
        background: rgba(255,255,255,0.08);
    }

    .sidebar a:hover {
        background: rgba(255,255,255,0.18);
    }

    .sidebar .danger {
        background: rgba(255, 80, 80, 0.25);
    }

    .sidebar .danger:hover {
        background: rgba(255, 80, 80, 0.4);
    }

    /* CONTEÚDO */
    .content {
        flex: 1;
        padding: 40px;
    }

    h1 {
        font-size: 28px;
        color: #1f3c88;
        margin-bottom: 5px;
    }

    .subtitle {
        color: #555;
        margin-bottom: 30px;
        font-size: 15px;
    }

    h2 {
        font-size: 22px;
        color: #1f3c88;
        margin-top: 40px;
        margin-bottom: 15px;
        border-bottom: 2px solid #ddd;
        padding-bottom: 6px;
    }

    /* CARDS */
    .card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 20px;
    }

    .card {
        background: #ffffff;
        border-radius: 10px;
        padding: 20px;
        border: 1px solid #e0e0e0;
        transition: 0.2s;
    }

    .card:hover {
        box-shadow: 0 6px 18px rgba(0,0,0,0.12);
        transform: translateY(-3px);
    }

    .card h3 {
        margin-top: 0;
        font-size: 18px;
        color: #1f3c88;
    }

    .card p {
        margin: 6px 0;
        font-size: 14px;
        color: #444;
    }

    /* BOTÕES DOS CARDS */
    .btn {
        padding: 6px 12px;
        border-radius: 5px;
        font-size: 13px;
        font-weight: 600;
        text-decoration: none;
        margin-right: 6px;
        display: inline-block;
    }

    .btn-primary {
        background: #1f3c88;
        color: #fff;
    }

    .btn-secondary {
        background: #e9ecef;
        color: #333;
        border: 1px solid #ced4da;
    }

    .btn-danger {
        background: #c92a2a;
        color: #fff;
    }
</style>

<div class="layout">

    <!-- MENU LATERAL -->
    <aside class="sidebar">
        <h2>DevLab</h2>

        <a href="{% url 'ver_perfil' %}">Meu Perfil</a>
        <a href="{% url 'criar_usuario' %}">Criar Usuário</a>
        <a href="{% url 'listar_usuarios' %}">Usuários</a>
        <a href="{% url 'criar_projeto' %}">Novo Projeto</a>
        <a href="{% url 'criar_equipe' %}">Nova Equipe</a>
        

        <a href="{% url 'logout' %}" class="danger">Sair</a>
    </aside>

    <!-- CONTEÚDO PRINCIPAL -->
    <main class="content">
        <h1>Área do Coordenador</h1>
        <p class="subtitle">
            Painel de gestão acadêmica de projetos, equipes e usuários
        </p>

        <!-- PROJETOS -->
        <h2>Projetos</h2>
        <div class="card-grid">
            {% for projeto in projetos %}
            <div class="card">
                <h3>{{ projeto.titulo }}</h3>
                <p><strong>Cliente:</strong> {{ projeto.cliente }}</p>
                <p><strong>Status:</strong> {{ projeto.status }}</p>
                <p><strong>Professor:</strong>
                    {% if projeto.professor_responsavel %}
                        {{ projeto.professor_responsavel.username }}
                    {% else %}
                        —
                    {% endif %}
                </p>
                <div>
                    <a href="{% url 'detalhe_projeto' projeto.id %}" class="btn btn-secondary">Ver</a>
                    <a href="{% url 'editar_projeto' projeto.id %}" class="btn btn-primary">Editar</a>
                    <a href="{% url 'deletar_projeto' projeto.id %}" class="btn btn-danger">Excluir</a>
                </div>
            </div>
            {% empty %}
            <p>Nenhum projeto cadastrado.</p>
            {% endfor %}
        </div>

        <!-- EQUIPES -->
        <h2>Equipes</h2>
        <div class="card-grid">
            {% for equipe in equipes %}
            <div class="card">
                <h3>{{ equipe.nome }}</h3>
                <p><strong>Projeto:</strong> {{ equipe.projeto.titulo }}</p>
                <p><strong>Líder:</strong> {{ equipe.lider.username }}</p>
                <p><strong>Membros:</strong>
                    {% for membro in equipe.participacaoequipe_set.all %}
                        {{ membro.usuario.username }}{% if not forloop.last %}, {% endif %}
                    {% empty %}
                        Nenhum membro
                    {% endfor %}
                </p>
                <div>
                    <a href="{% url 'detalhe_equipe' equipe.id %}" class="btn btn-secondary">Ver</a>
                    <a href="{% url 'editar_equipe' equipe.id %}" class="btn btn-primary">Editar</a>
                    <a href="{% url 'deletar_equipe' equipe.id %}" class="btn btn-danger">Excluir</a>
                </div>
            </div>
            {% empty %}
            <p>Nenhuma equipe cadastrada.</p>
            {% endfor %}
        </div>
    </main>

</div>
{% endblock %}
